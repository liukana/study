jenkins 打包

patch
	
	不选中 	正常打包
	选中   	打补丁包

正常打包流程

	1. 生成apk文件、mapping文件、R文件  均在achives文件夹下对应时间戳目录下；

	2. 上传对应文件至服务器，原有命名规则未改变；

	3. 目前忽略了oppo不签名包的处理

打补丁包流程：

	1. 修改bug，确定基准包name，根据打包时间确定archives目录下基准包， tinker-support 填写对应文件夹名称，提交git

	2. 选中patch，打包；outputs目录下生成补丁包相关，复制到archives目录下，上传补丁包至服务器；

	3. 服务器对应flavor目录下patch文件夹下，下载补丁包；目前补丁包历史打包未保存，均为覆盖历史；





问题总结：

	1. 文件路径问题

	2. bugly  改变bakApk配置路径，基准包生成路径也随之改变

	3. 文件夹权限问题， bugly生成补丁包，直接复制补丁包文件  失败；  复制/Users/admin/hotFix/yidian/build/outputs/patch 下文件夹  成功；  后续再研究改变文件夹权限（目前失败），直接上传服务器，本地不做备份

	4. 补丁文件是新旧apk对比产生的，新apk包目前没用，所以上传补丁文件后删除新apk相关

	5. python   os.listdir 方法返回目录无序，需要重新排序   sort（） ---->  原因：  bugly生成基准包目前是 (eg: yidian-02-08-14-23-45）为名称，因此上传apk相关文件时，需要拿最近一次生成的文件目录下的apk相关， 即  dirs[-1]  ,排序保证最新打包位于最后一位。（patch文件夹始终位于第一位，与 名称 有关）

	6. 子modules 代码更新问题修复


待完成：

	

	1. 打基准包重命名,由于是flavor打包，所以只需要修改文件夹名称，其余不需要修改； tinkerid 增加  flavor，version          ✅

	2. 基准包目录及相关文件名称 支持在jenkins上配置

		在服务器查询基准包文件夹名，jenkins打包填写；								✅





	1. 依赖  depe里面   ✅

	2. 其他进程   bug  资源修复    ✅

	3. 补丁结果显示

	4. tinker-support.gradle 是否执行

	5. 补丁版本上报   ✅

